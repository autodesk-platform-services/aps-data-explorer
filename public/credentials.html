<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Data Explorer</title>
    <link
      href="https://cdn.jsdelivr.net/npm/graphiql@2.0.13/graphiql.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="main.css" />
  </head>
  <body style="max-width: 50%; margin: auto">
    <form action="/credentials" method="post">
      <div class="modal-content pt-3 pb-3">
        <p>If you want to use your APS application's credentials and perhaps a different GraphQL endpoint as well then use the below form. 
          Later on, if you want to return to using the default endpoints and credentials then just select "Sign out" from the drop-down menu.</p>
        <p>The <b>Callback URL</b> of the APS app whose credentials you are providing below has to be exactly like this:</p>
        <p><a href="%CALLBACK_URL%">%CALLBACK_URL%</a></p>

        <label for="baseUrl" class="form-label pt-3"
          >APS endpoint</label
        >
        <input
          type="text"
          name="baseUrl"
          class="form-control"
          id="baseUrl"
          placeholder="e.g. https://developer.api.autodesk.com"
        />
        <div class="form-text">
          The base URL for APS endpoints like authentication.
        </div>

        <label for="gqlUrl" class="form-label pt-3"
          >GraphQL endpoint</label
        >
        <input
          type="text"
          name="gqlUrl"
          class="form-control"
          id="gqlUrl"
          placeholder="e.g. https://developer.api.autodesk.com/graphql"
        />
        <div class="form-text">
          The full URL of the endpoint to use.
        </div>

        <label for="clientId" class="form-label pt-3 required"
            >Client ID</label
          >
        <input
          type="text"
          name="clientId"
          class="form-control"
          id="clientId"
        />
        <div class="form-text">
          Provided when creating your app in the APS dev portal.
        </div>
       
        <label for="clientSecret" class="form-label pt-3 required"
          >Client Secret</label
        >
        <input
          type="password"
          name="clientSecret"
          class="form-control"
          id="clientSecret"
        />
        <div class="form-text">
          Provided when creating your app in the APS dev portal.
        </div>
      </div>
      <div class="modal-footer pt-6">
        <input id="storeCredentials" type="submit" value="NEXT" class="btn btn-primary full-width" disabled />
      </div>
    </form>
    <script>
      function setButtonState() {
        document.getElementById("storeCredentials").disabled = 
          !(document.getElementById("clientId").value && document.getElementById("clientSecret").value);
      }

      document.getElementById("clientId").onchange = document.getElementById("clientSecret").onchange = setButtonState;
    </script>
  </body>
</html>
